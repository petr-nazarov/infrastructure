# services:
  cloudflare-ddns:
    image: favonia/cloudflare-ddns:latest
    networks:
      - local_net
    dns:
      - "{{ local_dns }}"
    user: "{{ puid }}:{{ pgid }}"
    read_only: true
    cap_drop:
      - all
    environment:
      CLOUDFLARE_API_TOKEN: "{{ cloudflare_api_token }}"
      DOMAINS: "{{ cloudflare_managed_domains }}"
      IP6_PROVIDER: "none"
      PROXIED: "false"
    deploy:
      mode: replicated
      replicas: 1
      placement:
        constraints:
          - "node.role == manager"
      labels:
        - "traefik.enable=false"
